\section{Esempi di tecniche di Geolocalizzazione}
Una delle tecniche proposte per risolvere il problema della localizzazione
indoor è \textbf{Active badge}: sviluppata nei prima anni novanta dalla
Olivetti, prevede un badge attivo e dei sensori; ogni 15 minuti il badge
trasmette un segale infrarossi. Il meccanismo di telemetria prevede di utilizzare
un computer, collegato ad un'unica rete di 128 sensori; ogni sensore ha una coda
FIFO per mantenere in un buffer informazioni su 20 badges.
\bigbreak
\textbf{Active floor} è una tecnologia basata su piastrelle a pressione: a
seconda della piastrella su cui è rilevata la pressione è possibile localizzare
l'utente.
\bigbreak
Una successiva tecnologia di localizzazione indoor, decisamente più efficiente è
\textbf{Active bat}: è presente all'interno del soffitto una rete di sensori a
ultrasuoni; l'utente porta come wearable un piccolo emettitore: il segnale è
percepito dai sensori, i quali mandano le informazioni sul time of flight del
segnale infrarosso ad una base station che calcola la posizione con la
trilaterazione: è possibile individuare l'utente con una precisione di 3
centimetri.
La sua evoluzione diretta è Ubisense.
\bigbreak
Queste tecniche presentano limitazioni in termini di privacy: chiunque possa
accedere alla base station è in grado di conoscere la posizione di tutti gli
utenti del sistema. \textbf{Cricket system} rappresenta una tecnologia simile,
in cui è il dispositivo trasportabile a calcolare direttamente la posizione: una
maggior privacy è pagata con la necessità di avere dispositivi più intelligenti
e di conseguenza più costosi.
\bigbreak
\textbf{RADAR} rappresenta una tecnologia basata su RF di localizzazione indoor:
prevede di usare la struttura WiFi esistente. Si basa sul concetto di location
fingerprinting. È di tipo RSS empirico. Il principale vantaggio è che non è
necessaria una nuova infrastruttura.
\bigbreak
\textbf{placeLab} è una tecnologia che non richiede dei beacon specifici, ma
basandosi sul WiFi, Bluetooth o rete cellulare disponibili nell'ambiente
circostante, è in grado di determinare la posizione degli utenti. In questo modo
si può risolvere sia il problema dell'hardware dedicato per i sistemi di
positioning che quello della calibrazione dei componenti.
Naturalmente placelab fornisce risultati molto diversi a seconda che si basi sul
WiFi o sulla rete cellulare, sia in termini di precisione che di copertura.
Essendo basato sulla quantità di dispositivi nell'ambiente circostante inoltre
presenta prestazioni molto diverse a seconda che sia applicato in contesto
urbano, residenziale o suburbano.
Permette però di garantire un sistema di localizzazione che non richieda
all'utente di imparare ad usarlo e basato su beacons già disponibili.

\chapter{Mobile Sensing}

Dal concetto di ``strumentare l'ambiente'' con sensori e dispositivi, si è passati a
strumentare le persone (accelerometri sul corpo o dispositivi come nel active bat).

Questo trend si è poi accentuato quando i produttori di telefoni hanno iniziato a dotare i vari dispositivi di sensori per migliorare l'esperienza utente e per fornire nuove funzionalità.
Ad esempio l'accelerometro era stato introdotto per ruotare lo schermo alla rotazione del dispositivo e il giroscopio per permettere lo sviluppo di videogiochi più interattivi.

%Ad oggi però la tecnologia spinge sul dotare dispositivi general purpose,
%come i telefoni cellulari, di sensori: sensori nati con scopi ludici, come il
%giroscopio, o per attività quotidiane, come il microfono o l'accelerometro per
%la rotazione, sono diventati presto la base per percepire l'ambiente
%circostante.

% -- Commentato: ripete quanto detto sopra.
%All'inizio si strumentava l'ambiente, poi si è passato a strumentare le persone,
%poi con i cellulari abbiamo general purpose machine che permettono di sentire le
%cose. Inizialmente l'accelerometro era usato per la rotazione, il giroscopio per
%i giochi e il microfono per le cose normali.

Tali sensori non erano però pensati per ottenere misurazioni dall'ambiente circostante.
Quindi per sfruttarli è stato necessario sviluppare tecniche molto fantasiose al fine di superare le limitazioni poste dai produttori.
Tuttavia, nell'ultimo periodo, questi hanno capito l'importanza e l'utilità della raccolta dati attraverso i dispositivi general purpose ed hanno iniziato a fornire dei framework e del nuovo hardware per facilitare tale attività.

%, dato che in piattaforme ideate per altri scopi, anche se i produttori
%ad oggi stanno spingendo verso piattaforme hardware che facilitino il sensing e
%framework OS che incorporino middleware general purpose per il sensing.

Si è quindi sviluppata un'alternativa, con i relativi vantaggi e svantaggi, alle reti di sensori precedentemente utilizzate.
Infatti, le reti di sensori sono adatte a percepire l'ambiente, con hardware
specializzato per monitorare fenomeni specifici, le risorse vengono interamente dedicate
alla misurazione, ma con un alto costo in termini di deployment e manutenzione, mentre il sensing basato sui cellulari è molto comodo per le attività umane ma essendo basato su un hardware general purpose, non è adatto a misurazioni accurate dei vari fenomeni.
Inoltre, le risorse del sistema operativo vengono condivise tra le diverse
applicazioni.
Il vantaggio principale dei sensori presenti sugli smartphone è legato al bassissimo costo di
distribuzione e manutenzione, anche se non c'è la certezza che l'utente mantenga sul proprio telefono l'applicazione.

Alcuni esempi di applicazioni dell'utilizzo dei sensori presenti sugli smartphone sono:
\begin{itemize}
\item Rilevamento dell'attività fisica basandosi sul giroscopio, bussola e accelerometro.
\item Identificazione del mezzo di trasporto utilizzato: sfruttando sensori come l'accelerometro, il GPS o il WiFi si possono implementare meccanismi di riconoscimento del mezzo di trasporto adottato per suggerire percorsi alternativi o mezzi alternativi, migliorando l'efficienza.
\item Identificazione del contesto e ambiente: mediante microfoni e videocamera si possono
implementare applicazioni come diari automatici o per app per la salute.
\item Applicazioni per l'analisi della voce e delle conversazioni: con il
microfono si possono sviluppare applicazioni finalizzate allo studio sello stress
e delle interazioni sociali.
\end{itemize}

Tipicamente, il phone sensing segue un design pattern:
\begin{enumerate}
	\item Collezione dei dati raw, utilizzando i sensori
	\item Utilizzo dei valori ricavati dai sensori per inferire una particolare attività:
	\begin{itemize}
		\item attività fisica: l'utente sta correndo?
		\item context detection: ci sono altre persone nell'ambiente?
	\end{itemize}
	\item Visualizzazione dei risultati di alto livello all'utente o usarli per adattare il
comportamento dell'applicazione
\end{enumerate}

Lo scopo di un cellulare è supportare molte applicazioni, ma il sensing è
un'attività estremamente intensiva dal punto delle risorse. Serve perciò
equilibrio tra le risorse necessarie per operare e l'accuratezza della detection
ottenuta.

\section{Sensing}

Esistono sostanzialmente due strategie di sensing: \textbf{continua} e \textbf{duty cycling}.

Nel caso della strategia \textbf{continua}, il dispositivo monitora in maniera continua l'ambiente, ricavando anche informazioni superflue e duplicate: i dati sono estremamente precisi, ma è
una metodologia estremamente costosa in termini di utilizzo della CPU e della
batteria, con una possibile riduzione della durata della batteria (fino a 6 ore
in stand-by); per tale ragione è usata su quei sensori più ``economici'', come
l'accelerometro.

Per quanto riguarda la strategia \textbf{duty cycling}, periodicamente il sensore si
attiva, percependo l'ambiente circostante: si alternano fasi di attività a fasi di riposo.
L'impatto sulla batteria è molto ridotto, ma a costo di misurazioni
meno precise e senza tenere conto che durante la fase di riposo si potrebbero verificare degli eventi interessanti che non vengono rilevati.

Una strategia per migliorare questa tecnica è quella di adattare il periodo di
riposo sulla base degli eventi (\textbf{adaptive duty cycling}): se si ha percezione di eventi interessanti, il periodo di riposo è ridotto in termini di durata, se invece non accade niente
nella finestra di percezione, allora si aumenta il tempo di riposo.
Gli approcci tipici prevedono un incremento lineare con decrescita e
esponenziale o viceversa (dipende dall'evento), ottenendo un consumo di energia
migliore rispetto l'approccio al sensing continuo e un'accuratezza più elevata rispetto al duty
cycling.

Il problema è che viene richiesta una conoscenza molto approfondita del dominio applicativo (ad esempio durante una conversazione, se si percepisce una nuova voce, probabilmente la voce continuerà a parlare per del tempo).

\section{Inferenza}

Si chiama inferenza il processo di mappatura dei dati di basso livello a eventi significativi di alto livello.

La pipeline di inferenza tipicamente comprende tre fasi: sensing, feature extraction e classification.

La classificazione richiede un motore inferenziale o modello, che viene costruito in tre fasi:
\begin{enumerate}
\item Collezione dei dati grezzi con associata la corretta classificazione. Il dataset così formato dovrebbe comprendere anche situazioni che non stiamo cercando di individuare, ma che sono simili a quelle d'interesse (ad esempio se vogliamo individuare la camminata, dovremmo disporre di dati per la corsa e per lo stare in piedi).
\item Addestramento del motore inferenziale (calcolo del modello) con i dati collezionati.
\item Utilizzo del motore inferenziale nell'applicazione target per classificare i nuovi dati grezzi.
\end{enumerate}

\section{Feature Extraction}

Questa fase prevede di identificare le features in un dataset che possono essere
usate per inferire un particolare tipo di attività.

L'insieme delle features selezionate dipende dal tipo di sensori e di attività
che si deve individuare.

Il processo di design tipicamente include anche analisi
offline del training set per identificare le features corrette per il
particolare motore inferenziale.
In genere questo tipo di analisi è fatta mediante un processo iterativo, in cui vengono testate features diverse.

Un possibile esempio è quello dell'individuazione della conversazione: si può
applicare FFT (trasformata di Fourier) ai samples audio e comparare i training
data che sono etichettati come ``conversazione'' con quelli ``rumore non
conversazione''.
Come features si possono utilizzare la media e lo scarto quadratico medio della potenza dell'FFT.
A questo punto anche una semplice linea come threshold può fornire risultati
relativamente accurati (anche se con un alto numero di falsi positivi).

Nel caso di attività fisica ci si può basare sui dati dell'accelerometro, confrontando l'essere seduti con l'essere in piedi, il camminare e il correre: le features possono essere la media, la deviazione standard e il numero di picchi.

\section{Classification}

Dopo la fase di feature extraction abbiamo a nostra disposizione un vettore di
features: la classificazione compara il vettore di features con un insieme
predefinito di classi di alto livello.

In genere il motore di classificazione si basa su tecniche di machine learning ed è allenato a partire dai dati di training etichettati.
Tra i più comuni algoritmi di classificazione rientrano il Naive Bayes, l'albero di decisione$\ldots$
\bigbreak
Dato un insieme delle features $F_1, \ldots, F_n$ e una classe $c \in C$, si stima la
probabilità di:
\begin{equation}
p(C=c|F_1, \ldots, F_n)
\end{equation}
che può essere approssimata da
\begin{equation}
p(C=c|F_1,\ldots,F_n)=\frac{1}{Z}p(C)\prod_{i=1}^{n}p(F_i|C=c)
\end{equation}
dove Z è una costante e può essere ignorata durante la comparazione.

Usando il training set stimiamo $p(F_i|C=c)$ e durante l'esecuzione dell'applicazione, dato un insieme di valori per le features $f_1, \ldots, f_n$, selezioniamo il classificatore che massimizza
\begin{equation}
p(C=c)\prod_{i=1}^{n}p(F_i=f_i|C=c)
\end{equation}

\section{Ottimizzazioni dell'inferenza}

Il sampling adattivo può decrementare il costo energetico, ma anche l'inferenza
può essere costosa (un esempio di attività estremamente costosa è la
rilevazione del parlato). Un altro aspetto chiave è il tempo di computazione.
Spesso conviene scaricare parte del costo energetico da altre parti, ad esempio
in affidandosi ad un servizio cloud.

Nascono quindi due sfide:
\begin{itemize}
	\item Bilanciamento del consumo energetico: in alcuni casi può essere più efficiente eseguire l'inferenza sul dispositivo piuttosto che trasmettere tutti i dati grezzi ad un server per l'analisi.
	\item Bilanciamento dei tempi d'attesa: in alcuni casi può essere più veloce eseguire l'inferenza sullo smartphone piuttosto che aspettare la risposta da parte del server.
\end{itemize}

Una possibile soluzione è quella di suddividere la computazione: estrarre le features sul telefono e eseguire la classificazione nel cloud.

Tecniche più moderne e avanzate prevedono di distribuire il carico computazionale adattivamente: il miglior luogo per eseguire la computazione viene stabilito in modo dinamico, stimando il costo di questa operazione in tempo reale.
